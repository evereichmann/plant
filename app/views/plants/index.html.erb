<div class="ui container">
<div class="ui top attached tabular menu" >
<div class="item">
<h1><%= link_to 'Orders', orders_path, method: :get %></h1>
</div>
<div  class="item active">
<h1>Plants</h1>
</div>
<div class="item">
<h1><%= link_to 'Cuttings', cuttings_path, method: :get %></h1> 
</div>
<div class="item">
<h1><%= link_to 'Dashboard', pages_dashboard_path, method: :get %></h1> 
</div>
<div class="right menu">
    <div class="item">
<%= button_to "logout", destroy_user_session_path, method: :delete, class:"ui big button"%>
</div>
</div>
</div>


<div class="ui bottom attached segment">
<%= link_to '<button type="button" class="ui button">New Plant</button>'.html_safe, new_plant_path %>
<br/>
<table class="ui celled unstackable table">
  <thead>
    <tr>
      <th>Tag Number</th>
      <th>Name</th>
      <th>Unit price</th>
      <th>Arrival date</th>
      <th>Condition</th>
      <th>Recovery date</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @plants.each do |plant| %>
      <% if plant.condition != "dead" && plant.sold != true %>
      <tr>
        <% if plant.tag != nil %>
        <td id="plant"><%= plant.tag %></td>
        <% else %>
        <td id="plant"></td>  
      <% end %>  
        <td id="plant"><%= plant.name %></td>
        <td id="plant">$<%= plant.unit_price %></td>
        <% if plant.arrival_date != nil%>
          <td id="plant"><%= plant.arrival_date.month %>/<%= plant.arrival_date.day %>/<%= plant.arrival_date.year %></td>
        <%else%>
          <td id="plant">Not Recorded</td>
        <%end%>
        <td id="plant"><%= plant.condition %></td>
        <% if plant.arrival_date != nil%>
          <td id="plant"><%= plant.recovered?  %></td>
        <%else%>
          <td id="plant">Not Recorded</td>
        <%end%>
        <td id="plant"><%= link_to 'Show', plant %></td>
        <td id="plant"><%= link_to 'Edit', edit_plant_path(plant) %></td>
        <td id="plant"><%= link_to 'Destroy', plant, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
       <% else %>
       <% end %>
    <% end %>
  </tbody>
</table>

<br>

<h1>Cuttings</h1>
<table class="ui celled unstackable table">
  <thead>
    <tr>
      <th>Tag</th>
      <th>Name</th>
      <th>Cutting date</th>
      <th>Generation</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @cuttings.each do |cutting| %>
    <% if cutting.mother == true  && cutting.sold == false && cutting.condition != "dead" %>
      <tr>
        <td id="cutting"><%= cutting.tag %></td>
        <td id="cutting"><%= cutting.name %></td>
        <td id="cutting"><%= cutting.cutting_date.month %>/<%= cutting.cutting_date.day %>/<%= cutting.cutting_date.year %></td>
        <td id="cutting"><%= cutting.generation %></td>
        <td id="cutting"><%= link_to 'Show', cutting %></td>
        <td id="cutting"><%= link_to 'Edit', edit_cutting_path(cutting, {:name => cutting.name , :generation => cutting.generation , :parent_id => cutting.parent_id , :parent_type => cutting.parent_type }) %></td>
        <td id="cutting"><%= link_to 'Destroy', cutting, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
    <% end %>
  </tbody>
</table>


<br>
<h1>Sold</h1>
<table class="ui celled unstackable table">
  <thead>
    <tr>
      <th>Tag Number</th>
      <th>Name</th>
      <th>Unit price</th>
      <th>Arrival date</th>
      <th>Recovery date</th>
      <th>Price</th>
      <th>Profit</th>
      <th colspan="2"></th>
    </tr>
  </thead>

  <tbody>
    <% @plants.each do |plant| %>
      <% if plant.sold == true %>
      <tr>
           <% if plant.tag != nil %>
        <td id="sold"><%= plant.tag %></td>
      <% else %>
        <td id="sold"></td>  
      <% end %> 
        <td id="sold"><%= plant.name %></td>
        <td id="sold">$<%= plant.unit_price %></td>
        <% if plant.arrival_date != nil%>
          <td id="sold"><%= plant.arrival_date.month %>/<%= plant.arrival_date.day %>/<%= plant.arrival_date.year %></td>
        <%else%>
          <td id="sold">Not Recorded</td>
        <%end%>
        <td id="sold"><%= plant.condition %></td>
        <% if plant.arrival_date != nil%>
          <td id="sold"><%= plant.recovered?  %></td>
        <%else%>
          <td id="sold">Not Recorded</td>
        <%end%>
        <td id="sold">$<%= plant.price %></td>
        <% money = plant.price - plant.unit_price %>
        <td id="sold">$<%= money %></td>
        <td id="sold"><%= link_to 'Show', plant %></td>
        <td id="sold"><%= link_to 'Edit', edit_plant_path(plant) %></td>
      </tr>
      <% end %>
    <% end %>
  </tbody>
  <tbody>
    <% @cuttings.each do |cutting| %>
    <% if cutting.mother == true  && cutting.sold == true %>
      <tr>
        <td id="sold"><%= cutting.tag %></td>
        <td id="sold"><%= cutting.name %></td>
        <td id="sold"></td>
        <td id="sold"><%= cutting.cutting_date %></td>
        <td id="sold"></td>
        <td id="sold">$<%= cutting.price %></td>
        <td id="sold">$<%= cutting.price %></td>
        <td id="sold"><%= link_to 'Show', cutting %></td>
        <td id="sold"><%= link_to 'Edit', edit_cutting_path(cutting) %></td>
      </tr>
    <% end %>
    <% end %>
  </tbody>
</table>

<br>
<h1>Dead</h1> 
<table class="ui celled unstackable table">
  <thead>
    <tr>
      <th>Tag Number</th>
      <th>Name</th>
      <th>Unit price</th>
      <th>Arrival date</th>
      <th colspan="2"></th>
    </tr>
  </thead>

  <tbody>
    <% @plants.each do |plant| %>
      <% if plant.condition == "dead" %>
      <p></p>
      <tr>
           <% if plant.tag != nil %>
        <td id="dead"><%= plant.tag %></td>
      <% else %>
        <td id="dead"></td>  
      <% end %> 
        <td id="dead"><%= plant.name %></td>
        <td id="dead">$<%= plant.unit_price %></td>
        <% if plant.arrival_date != nil%>
          <td id="dead"><%= plant.arrival_date.month %>/<%= plant.arrival_date.day %>/<%= plant.arrival_date.year %></td>
        <%else%>
          <td id="dead">Not Recorded</td>
        <%end%>
        <td id="dead"><%= link_to 'Show', plant %></td>
        <td id="dead"><%= link_to 'Edit', edit_plant_path(plant) %></td>
      </tr>
      <% end %>
    <% end %>
    <% @cuttings.each do |cutting| %>
      <% if cutting.condition == "dead"%>
       <td id="dead"><%= cutting.tag %></td>
       <td id="dead"><%= cutting.name %></td>
       <td id="dead">Cutting</td>
       <td id="dead"><%= cutting.cutting_date.month %>/<%= cutting.cutting_date.day %>/<%= cutting.cutting_date.year %></td>
               <td id="cutting"><%= link_to 'Show', cutting %></td>
        <td id="cutting"><%= link_to 'Edit', edit_cutting_path(cutting, {:name => cutting.name , :generation => cutting.generation , :parent_id => cutting.parent_id , :parent_type => cutting.parent_type }) %></td>
       <% end %>
    <% end %>
  </tbody>
</table>
</div>
</div>
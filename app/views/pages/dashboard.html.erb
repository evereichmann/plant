<div class="ui container">
<div class="ui top attached tabular menu" >
<div class="item">
<h1><%= link_to 'Orders', orders_path, method: :get %></h1>
</div>
<div class="item">
<h1><%= link_to 'Plants', plants_path, method: :get %></h1>
</div>
<div class="item">
<h1><%= link_to 'Cuttings', cuttings_path, method: :get %></h1> 
</div>
<div class="item active">
<h1>Dashboard</h1>
</div>
<div class="right menu">
    <div class="item">
<%= button_to "logout", destroy_user_session_path, method: :delete, class:"ui big button"%>
</div>
</div>
</div>

<div class="ui bottom attached segment">

<div>
<p>total number of plants: <%= @plants.select{|plant| plant.condition != 'dead'}.length + @cuttings.select{|cutting| cutting.condition != 'dead'}.length %> </p>
<p>number of cuttings: <%= @cuttings.length %> </p>
<p>dead plants: <%= @plants.select{|plant| plant.condition == 'dead'}.length + @cuttings.select{|cutting| cutting.condition == 'dead'}.length%></p>
<p>dead cuttings: <%= @cuttings.select{|cutting| cutting.condition == 'dead'}.length%></p>
<p>plants sold: <%= @plants.select{|plant| plant.sold == true }.length + @cuttings.select{|cutting| cutting.sold == true }.length %></p>
</div>

<div>
<% list = @orders.select{|order| order.country_origin == 'Indonesia'} %>
<% avg = []%>
<% list.map do |item| %>
   <%  if item.date_shipped != nil %>
   <% a = Date.parse("#{item.date_order}") %>
   <% b = Date.parse("#{item.date_shipped}") %> 
   <% c = b.mjd - a.mjd %>
   <% avg << c %>
<% end %> 
<% end %>  
<br/> 
<p>average days from order to ship(Indonesia): <%= avg.sum / avg.length %> days</p>

<% list = @orders.select{|order| order.country_origin == 'Indonesia' && order.multiple == true } %>
<% avg = []%>
<% list.map do |item| %>
   <%  if item.date_shipped != nil %>
   <% a = Date.parse("#{item.date_order}") %>
   <% b = Date.parse("#{item.date_shipped}") %> 
   <% c = b.mjd - a.mjd %>
   <% avg << c %>
<% end %> 
<% end %>  
<br/> 
<p>average days from order to ship multiple plants(Indonesia): <%= avg.sum / avg.length %> days</p>

<% list = @orders.select{|order| order.country_origin == 'Indonesia' && order.multiple == false } %>
<% avg = []%>
<% list.map do |item| %>
   <%  if item.date_shipped != nil %>
   <% a = Date.parse("#{item.date_order}") %>
   <% b = Date.parse("#{item.date_shipped}") %> 
   <% c = b.mjd - a.mjd %>
   <% avg << c %>
<% end %> 
<% end %>  
<br/> 
<p>average days from order to ship single plants(Indonesia): <%= avg.sum / avg.length %> days</p>
</div>


</div>
